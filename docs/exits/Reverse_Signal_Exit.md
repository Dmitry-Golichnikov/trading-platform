# Выход по обратному сигналу модели/индикатора

## Назначение
Закрытие позиции, когда модель или индикатор генерируют противоположный сигнал (например, long → short или buy → sell). Применяется как динамический выход, основанный на качественных сменах режима.

## Варианты
- **Модельный**: выход при смене прогнозируемого класса/знака (например, вероятность long < 0.4).
- **Индикаторный**: пересечение скользящих средних, сигнал MACD/RSI, смена цвета Heikin-Ashi.
- **Комбинированный**: подтверждение двух и более индикаторов или моделей.

## Параметры
- `signal_source`: модель (`model_id`), индикатор (`RSI`, `MACD`), ансамбль.
- `threshold`: порог вероятности или значение индикатора.
- `confirmation`: количество баров, требуемых для подтверждения.
- `opposite_position`: разрешать ли разворот (закрыть long и открыть short).
- `cooldown`: минимальное время между выходами по сигналам.

## Рекомендации
- Писать логи с деталями сигналов (значение индикатора/вероятности, время).
- Избегать слишком частых переключений: использовать гистерезис или подтверждение.
- Согласовать с основными правилами стратегии (например, не закрывать по обратному сигналу, если trailing stop уже активен).
