# Random Forest

## Назначение
Ансамбль деревьев решений, обучаемых методом бэггинга. Используется для устойчивого предсказания направленных сигналов long/short и оценки важности признаков.

## Ключевые особенности
- Высокая устойчивость к шуму и переобучению.
- Оценивает важность признаков (Gini/Permutation) для диагностики вкладов индикаторов.
- Простая настройка и интерпретация, возможно параллельное обучение.

## Типичные гиперпараметры
- `n_estimators`: число деревьев (обычно 200+ для стабильности).
- `max_depth`, `max_features`, `min_samples_split`, `min_samples_leaf`: контроль сложности деревьев.
- `class_weight`: балансировка классов long/short/flat.
- `bootstrap`: включение/отключение бэггинга.

## Требования к данным
- Стандартизация не обязательна, модель работает с различными масштабами.
- Для long-only или short-only задач фильтруйте соответствующие записи и таргеты.
- Объём данных должен быть достаточным для снижения дисперсии (иначе увеличивать число деревьев).

## Метрики и валидация
- Accuracy, F1, ROC-AUC; добавлять трейдинговые метрики для проверки финального эффекта.
- Использовать walk-forward/expanding window и out-of-bag оценку (если включен bootstrap).
- Анализировать важность признаков и их стабильность между сплитами.

## Интеграция в конвейер
- Реализация через `RandomForestClassifier` или аналогичные классы.
- Сохранять модель (pickle/joblib) и метаданные важности.
- Может служить baseline для более сложных ансамблей и нейросетей.

## Ограничения и рекомендации
- Не даёт вероятностные прогнозы с высокой точностью; может потребоваться калибровка.
- Неэффективен при большом количестве признаков без отбора (расходы по памяти и времени).
- На временных рядах без дополнительных признаков (лаги, индикаторы) выдаёт ограниченные результаты.
