# Разметка и постобогащение

## Назначение
Создание таргетов, настройка барьеров и применение постфильтров для получения качественных сигналов, которые можно использовать в обучении.

## Разметка
- **Выбор конфигурации**: horizon, triple-barrier, режим направленности (long-only, long+short).
- **Расчёт таргетов**: бинарные, мультиклассовые, регрессионные, ранговые.
- **Балансировка**: class weights, oversampling, sequence-aware weighting.

## Постфильтры
- Фильтры по индикаторам/событиям.
- Минимальная длина последовательностей, объединение участков.
- Фильтрация опасных зон, коррекция ошибок.
- Логирование изменений и версия постфильтров.

## Конфигурация
- `label_config_id`: ссылка на YAML/JSON.
- `post_filter_config_id`: последовательность фильтров.
- `class_weights`/`sampling_params`.

## Артефакты
- Размеченные датасеты: `labels/train.parquet`, `labels/val.parquet`, `labels/test.parquet`.
- Метаданные: описание конфигурации, статистика классов.
- Логи применения постфильтров.

## Рекомендации
- Всегда фиксировать версию разметки и связку с данными.
- Проверять распределение таргетов и классов после постобработки.
- Хранить примеры (snapshots) для ручной проверки качества.
